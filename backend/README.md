## Kitmatch
**–°–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É—á–µ—Ç–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ FastAPI, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç AI-–º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö.

## üåü –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **AI-–¥–µ—Ç–µ–∫—Ü–∏—è**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Triton Inference Server –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö —Å –ø–æ–º–æ—â—å—é YOLO-–º–æ–¥–µ–ª–µ–π.
- **–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ó–∞–≥—Ä—É–∑–∫–∞ –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–ª–∏ `.zip`-–∞—Ä—Ö–∏–≤–æ–≤ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RabbitMQ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫ API.
- **–ï–¥–∏–Ω—ã–π –∑–∞–ø—É—Å–∫**: –ë—ç–∫–µ–Ω–¥ –Ω–∞ FastAPI –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ React –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –±–ª–∞–≥–æ–¥–∞—Ä—è Docker Compose.
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–æ—Ä–æ–≥**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–µ—Ç–µ–∫—Ü–∏–∏.

## üìú –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–∫–ª—é—á–µ–≤—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-—Å—Ö–µ–º–∞-—Ä–∞–±–æ—Ç—ã)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã](#-–Ω–∞—á–∞–ª–æ-—Ä–∞–±–æ—Ç—ã)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API](#-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-api)

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

1.  **–§—Ä–æ–Ω—Ç–µ–Ω–¥ (React)** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ **Nginx**.
2.  **Nginx** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–æ–∫—Å–∏:
    - –ó–∞–ø—Ä–æ—Å—ã –∫ `/api/*` –∏ `/static/*` –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å **API (FastAPI)**.
    - –û—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.
3.  **API (FastAPI)**, –ø–æ–ª—É—á–∏–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–µ –≤ –æ—á–µ—Ä–µ–¥—å **RabbitMQ**.
4.  –í–æ—Ä–∫–µ—Ä –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∑–∞–±–∏—Ä–∞–µ—Ç –∑–∞–¥–∞—á—É, –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ **Triton Inference Server** –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è.
5.  –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ **MongoDB**.
6.  –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend` –∏ `front` –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ (–±—ã—Ç—å "—Å–æ—Å–µ–¥–Ω–∏–º–∏").

```
project/
‚îú‚îÄ‚îÄ backend/                  # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ kitmatch/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ src/kitmatch/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—É—Ç–µ—Ä–æ–≤
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Pydantic
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ routes/              # –†–æ—É—Ç–µ—Ä—ã API (infer.py, api.py)
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ services/            # ObjectDetectionService
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ executors/           # –õ–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Triton (object_finder.py, triton_client.py)
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ db/                  # –ö–ª–∏–µ–Ω—Ç –¥–ª—è MongoDB
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ queue_utils/         # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å RabbitMQ
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ utils/               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è, –ª–æ–≥–≥–µ—Ä)
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfiles/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile           # Dockerfile –¥–ª—è —Å–±–æ—Ä–∫–∏ –±—ç–∫–µ–Ω–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml       # Docker Compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –í–°–ï–ì–û –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ pyproject.toml           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ front/                    # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
    ‚îú‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ Dockerfile               # Dockerfile –¥–ª—è —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (React + Nginx)
    ‚îî‚îÄ‚îÄ nginx.conf               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx (–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –±—ç–∫–µ–Ω–¥)
```

## üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

**–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∑–∞–ø—É—Å–∫–∞**: –§–∞–π–ª `docker-compose.yml` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend/` —è–≤–ª—è–µ—Ç—Å—è –≥–ª–∞–≤–Ω—ã–º –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–æ–º –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤: –±—ç–∫–µ–Ω–¥–∞, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ —Ç.–¥.

1.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` —Ñ–∞–π–ª** –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend/`.

    ```env
    # –ü–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
    API_PORT_EXTERNAL=8080
    API_PORT_INTERNAL=8000
    API_HOST=0.0.0.0

    # Application Environment
    APP_ENV=development

    # MongoDB Configuration
    MONGODB_URI=mongo_host
    MONGO_PORT=27017

    # RabbitMQ Configuration
    RABBITMQ_HOST=rabbit_host
    RABBIT_HEARTBEAT_MODELS=600
    RABBIT_BLOCKED_CONN_TIMEOUT_MODELS=300
    RABBIT_HEARTBEAT_REQUESTS=3000
    RABBIT_BLOCKED_CONN_TIMEOUT_REQUESTS=3000
    
    # URL –¥–ª—è Triton. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ docker-compose.yml –æ—Ç Triton Inference Server
    BACKEND__TRITON_URL=http://triton_server:8000
    # –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –∏–∑ Triton Inference Server
    MODEL_NAME="yolo11"
    ```

2.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã** –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend/`:

    ```bash
    docker compose up --build -d
    ```
    –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–±–µ—Ä–µ—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –±—ç–∫–µ–Ω–¥ (`api`), —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (`frontend`), RabbitMQ, MongoDB –∏ Dozzle.

3.  **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8080`.

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Nginx-–ø—Ä–æ–∫—Å–∏ –∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É `/api`.

### –ó–∞–≥—Ä—É–∑–∫–∞ –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –∏ —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –≤–∫–ª—é—á–∞—è URL –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –Ω–∞—Ä–∏—Å–æ–≤–∞–Ω–Ω—ã–º–∏ bounding box'–∞–º–∏.

- **–≠–Ω–¥–ø–æ–∏–Ω—Ç**: `POST /api/v1/infer/image`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**: `multipart/form-data`
  - `file`: —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - `confidence_threshold` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –æ—Ç `0.01` –¥–æ `1.0`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.5`.

**–ü—Ä–∏–º–µ—Ä `curl` –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X POST http://localhost:8080/api/v1/infer/image \
  -H "Content-Type: multipart/form-data" \
  -F "file=@/–ø—É—Ç—å/–∫/–≤–∞—à–µ–º—É/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é.jpg" \
  -F "confidence_threshold=0.6"
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `.zip`-–∞—Ä—Ö–∏–≤, –¥–æ–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `json`-—Ñ–∞–π–ª —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.

- **–≠–Ω–¥–ø–æ–∏–Ω—Ç**: `POST /api/v1/infer/archive`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**: `multipart/form-data`
  - `file`: `.zip`-–∞—Ä—Ö–∏–≤
  - `confidence_threshold` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.5`.

**–ü—Ä–∏–º–µ—Ä `curl` –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X POST http://localhost:8080/api/v1/infer/archive \
  -H "Content-Type: multipart/form-data" \
  -F "file=@/–ø—É—Ç—å/–∫/–≤–∞—à–µ–º—É/–∞—Ä—Ö–∏–≤—É.zip" \
  -F "confidence_threshold=0.75" \
  --output results.json
```
*–†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Ñ–∞–π–ª `results.json`.*

### –î—Ä—É–≥–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `GET /health`: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.
- `GET /api/ping`: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API.

