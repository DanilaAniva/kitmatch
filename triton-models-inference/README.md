### Models Inference (Triton)
**API –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –Ω–∞ –±–∞–∑–µ NVIDIA Triton Inference Server, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π REST API –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º YOLO –º–æ–¥–µ–ª–∏.

## üìú –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û–±–∑–æ—Ä](#-–æ–±–∑–æ—Ä)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-—Å—Ö–µ–º–∞-—Ä–∞–±–æ—Ç—ã)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã](#-–Ω–∞—á–∞–ª–æ-—Ä–∞–±–æ—Ç—ã)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏](#-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)
- [–ü—Ä–∏–º–µ—Ä –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞](#-–ø—Ä–∏–º–µ—Ä-–∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–ó–∞–º–µ—Ç–∫–∏](#-–∑–∞–º–µ—Ç–∫–∏)

## üìñ –û–±–∑–æ—Ä

–°–µ—Ä–≤–∏—Å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç **Triton Inference Server** –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å **YOLO –º–æ–¥–µ–ª—å—é**, –æ–±—É—á–µ–Ω–Ω–æ–π –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ 11 –∫–ª–∞—Å—Å–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTP –∏ gRPC –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

### üéØ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–ª–∞—Å—Å—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

- **–ë–æ–∫–æ—Ä–µ–∑—ã**
- **–ö–ª—é—á —Ä–æ–∂–∫–æ–≤—ã–π/–Ω–∞–∫–∏–¥–Ω–æ–π ¬æ**
- **–ö–æ–ª–æ–≤–æ—Ä–æ—Ç**
- **–û—Ç–≤–µ—Ä—Ç–∫–∞ ¬´+¬ª**
- **–û—Ç–≤–µ—Ä—Ç–∫–∞ ¬´-¬ª**
- **–û—Ç–≤–µ—Ä—Ç–∫–∞ –Ω–∞ —Å–º–µ—â–µ–Ω–Ω—ã–π –∫—Ä–µ—Å—Ç**
- **–û—Ç–∫—Ä—ã–≤–∞—à–∫–∞ –¥–ª—è –±–∞–Ω–æ–∫ —Å –º–∞—Å–ª–æ–º**
- **–ü–∞—Å—Å–∞—Ç–∏–∂–∏**
- **–ü–∞—Å—Å–∞—Ç–∏–∂–∏ –∫–æ–Ω—Ç—Ä–æ–≤–æ—á–Ω—ã–µ**
- **–†–∞–∑–≤–æ–¥–Ω–æ–π –∫–ª—é—á**
- **–®—ç—Ä–Ω–∏—Ü–∞**

### üõ†Ô∏è –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **Triton Inference Server** üöÄ: –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ —Å HTTP/gRPC API
- **YOLO –º–æ–¥–µ–ª—å** üéØ: –Ω–µ–π—Ä–æ—Å–µ—Ç—å –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π GPU
- **Python backend** üêç: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YOLO
- **Docker Compose** üê≥: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```mermaid
graph TD;
    Client["–ö–ª–∏–µ–Ω—Ç (HTTP/gRPC)"] -->|/v2/*| Triton["Triton Inference Server"];
    Triton --> PyBackend["Python Backend (YOLO –º–æ–¥–µ–ª—å)"];
    PyBackend --> YOLO["YOLO Neural Network"];
    Triton --> Metrics["–ú–µ—Ç—Ä–∏–∫–∏ (Prometheus)"];
    YOLO --> Detections["–î–µ—Ç–µ–∫—Ü–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤"];
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
triton-models-inference/
‚îú‚îÄ‚îÄ docker-compose.yml              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose
‚îú‚îÄ‚îÄ model_repository/               # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–æ–¥–µ–ª–µ–π Triton
‚îÇ   ‚îî‚îÄ‚îÄ yolo/                       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è YOLO –º–æ–¥–µ–ª–∏
‚îÇ       ‚îú‚îÄ‚îÄ config.pbtxt            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏
‚îÇ       ‚îî‚îÄ‚îÄ 1/
‚îÇ           ‚îî‚îÄ‚îÄ model.py            # Python backend –¥–ª—è YOLO
‚îú‚îÄ‚îÄ models/                         # Python –ø–∞–∫–µ—Ç —Å –ª–æ–≥–∏–∫–æ–π –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ setup.py                    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ src/models/
‚îÇ       ‚îî‚îÄ‚îÄ YOLO/weights/best.pt    # –í–µ—Å–∞ YOLO –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ triton_infer_test.py            # –¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
‚îú‚îÄ‚îÄ requirements.txt                # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ README.md                       # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è

- **Docker** –∏ **Docker Compose**
- **NVIDIA GPU** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è): –¥—Ä–∞–π–≤–µ—Ä—ã NVIDIA + NVIDIA Container Toolkit
- **CPU** (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞): –¥–ª—è CPU-—Ä–µ–∂–∏–º–∞ —É–±–µ—Ä–∏—Ç–µ GPU –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ docker-compose.yml

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
cd /home/ubuntu/triton-models-inference
docker-compose up --build -d
```

–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ—Ä—Ç–∞—Ö:
- **1339** ‚Äî HTTP API (–æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- **1340** ‚Äî gRPC API (–≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π)
- **1341** ‚Äî –ú–µ—Ç—Ä–∏–∫–∏ Prometheus (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞

```bash
docker-compose down
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞

```bash
curl http://localhost:1339/v2/health/ready
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏

```bash
curl http://localhost:1339/v2/models/yolo
```

### –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π

```bash
curl http://localhost:1339/v2/models
```

## üß™ –ü—Ä–∏–º–µ—Ä –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

```bash
python3 triton_infer_test.py --image /path/to/image.jpg
```

–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç –∏–Ω—Ñ–µ—Ä–µ–Ω—Å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- `triton_infer_out/result.json` ‚Äî JSON —Å –¥–µ—Ç–µ–∫—Ü–∏—è–º–∏
- `triton_infer_out/result.jpg` ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å bounding boxes

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

```bash
python3 triton_infer_test.py --help

--host HOST          –ê–¥—Ä–µ—Å Triton —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: localhost)
--port PORT          –ü–æ—Ä—Ç Triton —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1339)  
--model MODEL        –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: yolo)
--image IMAGE        –ü—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
--out_json OUT_JSON  –ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
--out_vis OUT_VIS    –ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
```

## üì° API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

- **`image`**: UINT8 —Ç–µ–Ω–∑–æ—Ä —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ `[H, W, C]`

### –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

- **`bboxes`**: JSON —Å—Ç—Ä–æ–∫–∞ —Å –º–∞—Å—Å–∏–≤–æ–º –¥–µ—Ç–µ–∫—Ü–∏–π:

```json
[
  {
    "bbox": [x1, y1, x2, y2],
    "confidence": 0.95,
    "class": "–ü–∞—Å—Å–∞—Ç–∏–∂–∏",
    "class_id": 7
  }
]
```

### –ü—Ä–∏–º–µ—Ä HTTP –∑–∞–ø—Ä–æ—Å–∞

```bash
curl -X POST http://localhost:1339/v2/models/yolo/infer \
  -H 'Content-Type: application/json' \
  -d '{
        "inputs": [
          {
            "name": "image",
            "datatype": "UINT8",
            "shape": [640, 640, 3],
            "data": [/* –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */]
          }
        ]
      }'
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏

–ú–æ–¥–µ–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `config.pbtxt`:

- **`conf_threshold`**: –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.5)
- **`iou_threshold`**: –ø–æ—Ä–æ–≥ IoU –¥–ª—è NMS (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.45)
- **`classes`**: —Å–ø–∏—Å–æ–∫ –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏

## üìù –ó–∞–º–µ—Ç–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GPU –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏
- **–ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å**: YOLO –º–æ–¥–µ–ª—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**: Triton –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

- **Editable —É—Å—Ç–∞–Ω–æ–≤–∫–∞**: –ø–∞–∫–µ—Ç `models/` –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ editable —Ä–µ–∂–∏–º–µ
- **–ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞**: –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- –í `config.pbtxt` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `KIND_AUTO` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ CPU/GPU
- –î–ª—è CPU-—Ä–µ–∂–∏–º–∞ —É–±–µ—Ä–∏—Ç–µ –±–ª–æ–∫ `deploy.resources.devices` –≤ docker-compose.yml
- –ü–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ Prometheus –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞


